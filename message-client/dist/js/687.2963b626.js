"use strict";(self["webpackChunkmessage_client"]=self["webpackChunkmessage_client"]||[]).push([[687],{7627:function(e,t,a){a.d(t,{h:function(){return l}});var s=a(1020),r=a(1296),n=a(2074);const l=(0,s.Q_)("main",{state:()=>({user:{id:0,userId:0,name:"",email:"",role:"",avatar:"",brief:"",sex:3,birthday:""},token:localStorage.getItem("token")||"",type:0,isExist:!1}),actions:{async initUser(){let e=await(0,r.n5)();200==e.status&&(this.user.id=e.data.ip)},async getInfo(){let e=await(0,r.bG)(),{name:t,userId:a,email:s,role:n,avatar:l,brief:o,sex:i,birthday:c}=e.data;200==e.status&&(this.user.userId=a,this.user.name=t,this.user.email=s,this.user.role=n,this.user.avatar=l,this.user.brief=o,this.user.sex=i,this.user.birthday=c),localStorage.setItem("userInfo",JSON.stringify(this.user))},async login(e){let t=await(0,r.n$)(e);localStorage.setItem("token",t.token),this.getInfo(),n.ZP.success(t.msg)},async submitInfo(e){let t=await(0,r.gS)(e);200===t.status&&(this.user=e,localStorage.setItem("userInfo",JSON.stringify(this.user)),n.ZP.success(t.msg))},async isRegister(e){this.isExist=await(0,r.J)(e)},logOut(){localStorage.removeItem("userInfo"),localStorage.removeItem("token")}},getters:{}})},8896:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(3396),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},n=r,l=a(9388);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),s.forEach((function(t){i(e,t,a[t])}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e,t){var a=o({},e,t.attrs);return(0,s.Wm)(l.Z,o({},a,{icon:n}),null)};c.displayName="UserOutlined",c.inheritAttrs=!1;var u=c},7120:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var s=a(3396),r=a.p+"img/bg.4e5d153c.png",n=(a(7658),a(7139)),l=a(4870),o=a(9242),i=a(5522),c=a(2483),u=a(7627),d=a(8896),p=a(5599),m=a(1020);const g=e=>((0,s.dD)("data-v-44334afb"),e=e(),(0,s.Cn)(),e),v={class:"top-bar"},f=g((()=>(0,s._)("div",{class:"left"},[(0,s._)("img",{src:i,class:"logo",alt:""}),(0,s._)("h3",null,"轻语留言")],-1))),h={class:"middle"},w={class:"right"},b={key:0,class:"login"},_={class:"user-info"},y=g((()=>(0,s._)("p",null,"欢迎登录",-1))),S=g((()=>(0,s._)("h2",null,"留言墙",-1)));var k=(0,s.aZ)({__name:"TopBar",setup(e){const t=(0,c.yj)(),a=(0,c.tv)(),r=(0,u.h)();let{type:i,user:g}=(0,m.Jk)(r),k=(0,s.Fl)((()=>t.query.id));const U=JSON.parse(localStorage.getItem("userInfo"))||g;let I=(0,s.Fl)((()=>!(C.name.trim().length>0&&C.password.trim().length>0)));i.value=localStorage.getItem("token")?1:0;let C=(0,l.qj)({name:"",password:""}),O=(0,l.iH)(!1);const W=()=>{0==i.value?O.value=!O.value:a.push("/personal")},j=e=>{O.value=!1,C.name="",C.password="",a.push({query:{id:e}})},Z=async()=>{C.name=C.name.trim(),C.password=C.password.trim(),await r.login(C),O.value=!1,i.value=1},x=()=>{O.value=!1,a.push("/register")},D=()=>{r.logOut(),C.name="",C.password="",i.value=0},P=()=>{let e=a.resolve({path:"/repsw"});window.open(e.href,"_blank")};return(e,t)=>{const a=(0,s.up)("a-button"),r=(0,s.up)("a-avatar"),c=(0,s.up)("a-popover"),u=(0,s.up)("a-input"),m=(0,s.up)("a-input-password"),g=(0,s.up)("a-card");return(0,s.wg)(),(0,s.iD)("div",v,[f,(0,s._)("div",h,[(0,s.Wm)(a,{shape:"round",class:(0,n.C_)({active:0==(0,l.SU)(k)}),onClick:t[0]||(t[0]=e=>j(0))},{default:(0,s.w5)((()=>[(0,s.Uk)("留言墙")])),_:1},8,["class"]),(0,s.Wm)(a,{shape:"round",class:(0,n.C_)({active:1==(0,l.SU)(k)}),middle:"",onClick:t[1]||(t[1]=e=>j(1))},{default:(0,s.w5)((()=>[(0,s.Uk)("照片墙")])),_:1},8,["class"])]),(0,s._)("div",w,[1==(0,l.SU)(i)?((0,s.wg)(),(0,s.j4)(c,{key:0,placement:"bottom"},{content:(0,s.w5)((()=>[(0,s._)("div",{style:{cursor:"pointer"},onClick:D},"退出登录")])),default:(0,s.w5)((()=>[(0,s.Wm)(r,{size:"large",style:{cursor:"pointer"},src:(0,l.SU)(U).avatar,onClick:W},{icon:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(d.Z))])),_:1},8,["src"])])),_:1})):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"user",onClick:W}))]),(0,s.Wm)(o.uT,{name:"modal"},{default:(0,s.w5)((()=>[(0,l.SU)(O)?((0,s.wg)(),(0,s.iD)("div",b,[(0,s.Wm)(g,{bodyStyle:"{padding-top:'0'}"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"close",onClick:W},[(0,s._)("i",null,[(0,s.Wm)((0,l.SU)(p.Z))])]),(0,s._)("div",_,[y,S,(0,s.Wm)(u,{style:{height:"36px"},placeholder:"用户",value:(0,l.SU)(C).name,"onUpdate:value":t[2]||(t[2]=e=>(0,l.SU)(C).name=e)},null,8,["value"]),(0,s.Wm)(m,{class:"pwd",value:(0,l.SU)(C).password,"onUpdate:value":t[3]||(t[3]=e=>(0,l.SU)(C).password=e),placeholder:"密码"},null,8,["value"]),(0,s.Wm)(a,{style:(0,n.j5)({"background-color":(0,l.SU)(I)?"#ccc":"black"}),onClick:Z,disabled:(0,l.SU)(I)},{default:(0,s.w5)((()=>[(0,s.Uk)("登录")])),_:1},8,["style","disabled"])]),(0,s._)("div",{class:"control"},[(0,s._)("span",{class:"forget",onClick:P},"忘记密码？"),(0,s._)("span",{class:"register",onClick:x},"注册")])])),_:1})])):(0,s.kq)("",!0)])),_:1})])}}}),U=a(89);const I=(0,U.Z)(k,[["__scopeId","data-v-44334afb"]]);var C=I;const O=e=>((0,s.dD)("data-v-9031a546"),e=e(),(0,s.Cn)(),e),W=O((()=>(0,s._)("img",{src:r,class:"bg",alt:""},null,-1))),j={style:{"padding-bottom":"60px"}};var Z=(0,s.aZ)({__name:"Home",setup(e){const t=(0,u.h)();return t.initUser(),(e,t)=>{const a=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[W,(0,s._)("div",j,[(0,s.Wm)(C),(0,s.Wm)(a)])],64)}}});const x=(0,U.Z)(Z,[["__scopeId","data-v-9031a546"]]);var D=x},5522:function(e,t,a){e.exports=a.p+"img/logo.779a3991.svg"}}]);
//# sourceMappingURL=687.2963b626.js.map