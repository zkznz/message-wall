"use strict";(self["webpackChunkmessage_client"]=self["webpackChunkmessage_client"]||[]).push([[930],{4930:function(e,a,l){l.r(a),l.d(a,{default:function(){return U}});l(7658);var t=l(3396),s=l(4870),r=l(5522),i=l(1296),u=l(7627),n=l(1020),o=l(2074),d=l(3824);const c=e=>((0,t.dD)("data-v-1e47ad0a"),e=e(),(0,t.Cn)(),e),m={class:"content"},p=c((()=>(0,t._)("div",{class:"header"},[(0,t._)("img",{src:r,alt:""}),(0,t._)("span",null,"轻语留言")],-1))),v={class:"card"},_=c((()=>(0,t._)("div",{class:"title"},[(0,t._)("span",null,"修改密码"),(0,t._)("p",null,"请输入账号注册邮箱获取验证码")],-1))),g={class:"info"},f=c((()=>(0,t._)("p",{class:"footer"},"该注册账号只限于在网站内测试、学习，请妥善保护自己个人隐私和个人信息，以免造成不必要的影响。谢谢～",-1)));var w=(0,t.aZ)({__name:"Repsw",setup(e){const a=(0,u.h)();let{isExist:l}=(0,n.Jk)(a),r=(0,s.qj)({email:"",code:"",password:""}),c=async(e,t)=>{if(0===t.length)return Promise.reject("邮箱不能为空");let s=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return s.test(t)?(await a.isRegister({email:t}),l.value?void 0:Promise.reject("该邮箱未注册账号")):Promise.reject("请输入正确的邮箱")},w=async(e,a)=>{if(0===a.length)return Promise.reject("请填入验证码");let l={email:r.email,code:r.code},t=await(0,i.VP)(l);return!t.check||a.length<6?Promise.reject("验证码错误"):void 0},h=async(e,a)=>0===a.length?Promise.reject("密码不能为空"):a.length<6?Promise.reject("密码不能小于六位"):void 0;const W=[{required:!0,validator:c}],U=[{validator:w}],k=[{required:!0,validator:h,trigger:"change"}],b=(0,s.iH)(),y=()=>{b.value?.validate().then((async e=>{let l=await(0,i.ZU)(e);200===l.status&&(a.logOut(),o.ZP.success(l.msg),d.Z.push("/"))})).catch((()=>{}))},Z=async()=>{let e={email:r.email},a=await(0,i.Cq)(e);console.log("res",a)};return(e,a)=>{const l=(0,t.up)("a-input"),i=(0,t.up)("a-form-item"),u=(0,t.up)("a-col"),n=(0,t.up)("a-button"),o=(0,t.up)("a-row"),d=(0,t.up)("a-input-password"),c=(0,t.up)("a-form"),w=(0,t.up)("a-card");return(0,t.wg)(),(0,t.iD)("div",m,[p,(0,t._)("div",v,[(0,t.Wm)(w,{style:{width:"390px"}},{default:(0,t.w5)((()=>[_,(0,t._)("div",g,[(0,t.Wm)(c,{layout:"vertical",model:(0,s.SU)(r),ref_key:"formRef",ref:b},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"邮箱",name:"email",rules:W,validateTrigger:"submit"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"large",placeholder:"用户邮箱",value:(0,s.SU)(r).email,"onUpdate:value":a[0]||(a[0]=e=>(0,s.SU)(r).email=e)},null,8,["value"])])),_:1}),(0,t.Wm)(i,{label:"验证码",name:"code",rules:U,validateTrigger:"submit"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{gutter:24},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{span:10},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{size:"large","validate-event":!1,value:(0,s.SU)(r).code,"onUpdate:value":a[1]||(a[1]=e=>(0,s.SU)(r).code=e)},null,8,["value"])])),_:1}),(0,t.Wm)(u,{span:14},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{size:"large",shape:"round",class:"send-btn",onClick:Z},{default:(0,t.w5)((()=>[(0,t.Uk)("发送验证码")])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(i,{label:"新密码",name:"password",rules:k},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{value:(0,s.SU)(r).password,"onUpdate:value":a[2]||(a[2]=e=>(0,s.SU)(r).password=e),size:"large",placeholder:"不小于6位数"},null,8,["value"])])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,{type:"primary",shape:"round",class:"btn",onClick:y},{default:(0,t.w5)((()=>[(0,t.Uk)("修改")])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})]),f])}}}),h=l(89);const W=(0,h.Z)(w,[["__scopeId","data-v-1e47ad0a"]]);var U=W},5522:function(e,a,l){e.exports=l.p+"img/logo.779a3991.svg"}}]);
//# sourceMappingURL=930.9e188ae2.js.map