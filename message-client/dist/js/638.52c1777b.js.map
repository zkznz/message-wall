{"version":3,"file":"js/638.52c1777b.js","mappings":"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","sources":["webpack://message-client/./src/views/Register.vue?1b3d","webpack://message-client/./src/views/Register.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, unref as _unref, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '@/assets/img/logo.svg'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5f2cb3b6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"content\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"header\" }, [\n  /*#__PURE__*/_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"\"\n  }),\n  /*#__PURE__*/_createElementVNode(\"span\", null, \"轻语留言欢迎你\")\n], -1))\nconst _hoisted_3 = { class: \"card\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"账号注册\", -1))\nconst _hoisted_5 = { class: \"info\" }\nconst _hoisted_6 = { class: \"exist\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"footer\" }, \"该注册账号只限于在网站内测试、学习，请妥善保护自己个人隐私和个人信息，以免造成不必要的影响。谢谢～\", -1))\n\nimport type { Rule, FormInstance } from 'ant-design-vue/es/form';\r\nimport { IRegForm } from '@/type'\r\nimport { reactive, ref } from 'vue'\r\nimport { register, checkName } from '@/api'\r\nimport { message } from 'ant-design-vue';\r\nimport { useRouter } from \"vue-router\"\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Register',\n  setup(__props) {\n\r\nconst router = useRouter();\r\nconst formData = reactive<IRegForm>({\r\n    name: '',\r\n    password: '',\r\n    email: ''\r\n})\r\nconst formRef = ref<FormInstance>();\r\nlet isExist = ref<boolean>(false);\r\n//校验邮箱\r\nlet checkEmail = async (rule: Rule, value: string) => {\r\n    if (value.length === 0)\r\n        return Promise.reject(\"邮箱不能为空！\");\r\n    let reg = /^([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$/\r\n    if (!reg.test(value))\r\n        return Promise.reject('请输入正确的邮箱');\r\n}\r\n//校验名称\r\nlet validName = async (rule: Rule, value: string) => {\r\n    if (value.length === 0)\r\n        return Promise.reject('名称不能为空！');\r\n    let res = await checkName(value);\r\n    if (res)\r\n        return Promise.reject('名称已被占用，请换个名称');\r\n}\r\nconst rules: Record<string, Rule[]> = {\r\n    name: [{ required: true, validator: validName, trigger: 'blur' }],\r\n    password: [{ required: true, trigger: 'blur', message: \"密码不能为空！\" }, { min: 6, trigger: 'change', message: '密码不能小于6位' }],\r\n    email: [{ required: true, validator: checkEmail, trigger: 'blur' }],\r\n};\r\n//提交表单\r\nconst submitForm = () => {\r\n    formRef.value?.validate().then(async (res: any) => {\r\n        let result = await register(res);\r\n        //用户已存在\r\n        if (result.status === 441) {\r\n            isExist.value = result.exist;\r\n        }\r\n        else {\r\n            isExist.value = false;\r\n            message.success(result.msg);\r\n            router.push(\"/\");\r\n        }\r\n    }).catch(() => {\r\n        return;\r\n    });\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_input_password = _resolveComponent(\"a-input-password\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_card = _resolveComponent(\"a-card\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_component_a_card, { style: {\"width\":\"390px\"} }, {\n        default: _withCtx(() => [\n          _hoisted_4,\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createVNode(_component_a_form, {\n              layout: \"vertical\",\n              model: formData,\n              rules: rules,\n              ref_key: \"formRef\",\n              ref: formRef\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_form_item, {\n                  label: \"用户名\",\n                  name: \"name\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_input, {\n                      size: \"large\",\n                      value: formData.name,\n                      \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((formData.name) = $event)),\n                      valueModifiers: { trim: true },\n                      placeholder: \"取一个昵称\"\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_form_item, {\n                  label: \"邮箱\",\n                  name: \"email\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_input, {\n                      size: \"large\",\n                      value: formData.email,\n                      \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((formData.email) = $event)),\n                      valueModifiers: { trim: true },\n                      placeholder: \"规范的邮箱\"\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_form_item, {\n                  label: \"密码\",\n                  name: \"password\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_input_password, {\n                      size: \"large\",\n                      value: formData.password,\n                      \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => ((formData.password) = $event)),\n                      valueModifiers: { trim: true },\n                      placeholder: \"不小于6位数\"\n                    }, null, 8, [\"value\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_form_item, { style: {\"height\":\"120px\"} }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_button, {\n                      type: \"primary\",\n                      class: \"btn\",\n                      onClick: submitForm\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(\"注册\")\n                      ]),\n                      _: 1\n                    }),\n                    _withDirectives(_createElementVNode(\"p\", _hoisted_6, \"邮箱已被注册,请直接登录\", 512), [\n                      [_vShow, _unref(isExist)]\n                    ])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"model\"])\n          ])\n        ]),\n        _: 1\n      })\n    ]),\n    _hoisted_7\n  ]))\n}\n}\n\n})","import script from \"./Register.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Register.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=5f2cb3b6&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\1174633615\\\\Desktop\\\\message-wall\\\\message-client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5f2cb3b6\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_createElementVNode","src","_imports_0","alt","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_defineComponent","__name","setup","__props","router","useRouter","formData","reactive","name","password","email","formRef","ref","isExist","checkEmail","async","rule","value","length","Promise","reject","reg","test","validName","res","checkName","rules","required","validator","trigger","message","min","submitForm","validate","then","result","register","status","exist","msg","push","catch","_ctx","_cache","_component_a_input","_resolveComponent","_component_a_form_item","_component_a_input_password","_component_a_button","_component_a_form","_component_a_card","_openBlock","_createElementBlock","_createVNode","style","default","_withCtx","layout","model","ref_key","label","size","$event","valueModifiers","trim","placeholder","_","type","onClick","_createTextVNode","_withDirectives","_vShow","_unref","__exports__"],"sourceRoot":""}